name: Sedstart No-Code Tests

on:
  workflow_dispatch
  repository_dispatch:
    types: [run-sedstart]

jobs:
  run-sedstart:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Sedstart Tests Directly
        run: |
          curl -X POST https://api.sedstart.io/v1/runs \
            -H "Authorization: Bearer ${{ secrets.SEDSTART_API_KEY }}" \
            -H "Content-Type: application/json" \
            -d '{
              "project_id": "${{ github.event.client_payload.project_id || "334" }}",
              "test_id": "${{ github.event.client_payload.test_id || "TC_03" }}",
              "profile_id": "${{ github.event.client_payload.profile_id || "334" }}",
              "browser": "chrome",
              "headless": true,
              "environment": "QA"
            }'
          echo ""
          echo "Tests triggered! Check Sedstart dashboard â†’ Run history"
        env:
          # nothing else needed
